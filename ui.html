<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
  rel="stylesheet"
/>

<style>
  body {
    background-color: #d5deff;
    font-family: "Inter", sans-serif;
  }

  h1 {
    font-family: "Inter", sans-serif;
  }

  .container {
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 10%;
  }

  .container1 {
    text-align: center;
    background-color: #c4c4c4;
    width: 300px;
    height: 400px;
  }

  .container2 {
    text-align: center;
    background-color: #c4c4c4;
    width: 300px;
    height: 400px;
  }
</style>

<h1>Node Comparing Plugin</h1>
<div class="container">
  <div class="node1">
    <p>Node 1</p>
    <div class="container1" id="container1"></div>
    <button id="getPropertiesOfNode1">Select Node 1</button>
  </div>
  <div class="node2">
    <p>Node 2</p>
    <div class="container2" id="container2"></div>
    <button id="getPropertiesOfNode2">Select node 2</button>
  </div>
</div>

<script>
  document
    .getElementById("getPropertiesOfNode1")
    .addEventListener("click", function () {
      parent.postMessage(
        { pluginMessage: { type: "getSelectedNodeProperties" } },
        "*"
      );
    });

  document
    .getElementById("getPropertiesOfNode2")
    .addEventListener("click", function () {
      parent.postMessage(
        { pluginMessage: { type: "getSelectedNodeProperties" } },
        "*"
      );
    });




  // Add this script to handle incoming messages and update containers
  window.addEventListener("message", (event) => {
  if (event.data.pluginMessage && event.data.pluginMessage.type === "updateContainer") {

    const { containerId, data } = event.data.pluginMessage;
    
    let containerIdString = containerId ? "container1" : "container2";
    let jsonDisplay = document.getElementById(`jsonDisplay${containerIdString}`);
    if (jsonDisplay) {
      jsonDisplay.textContent = data;
    }
  }
});

</script>
